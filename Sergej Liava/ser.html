<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
<canvas width="1000" height="1000" id="Seg">
</canvas>
<script type="text/javascript" id="Seg">
	
	let cnv = document.getElementById("Seg")
	let ctx = cnv.getContext("2d");
	let tank = new Image();
	let tw = 100;
	let th = 100;
	let tx = Math.random()*(cnv.width-tw);
	let ty = Math.random()*(cnv.height-tw);
	let playerDown = false;
	let playerUp = false;
	let playerLeft = false;
	let playerRight = false;
	let dir;
	let shot = true; 
	let bulletsArr = [];
	document.addEventListener("keydown", nazhato, false)
	document.addEventListener("keyup", otzhali, false)
function nazhato(e){
		if(e.keyCode == 83){
			playerDown = true;
		}
	if(e.keyCode == 69){
			shot = true;
		}
		if(e.keyCode == 87){
			playerUp = true;

		}
		if(e.keyCode == 68){
			playerRight = true;

		}
		if(e.keyCode == 65){
			playerLeft = true;

		}
	}
function otzhali(e){
		if(e.keyCode == 83){
			playerDown = false;
		}
		if(e.keyCode == 87){
			playerUp = false;
		}
		if(e.keyCode == 68){
			playerRight = false;
		}
		if(e.keyCode == 65){
			playerLeft = false;
		}
		if(e.keyCode == 69){
			shot = false;
		}
	}
	function bullets(x, y, w, h){
		this.x = x;
		this.y = y;
		this.w = w;
		this.h = h;
			}
			function createbullets(){
				let x = tx;
				let y = ty;
				let w = 20;
				let h = 20;
				let bullet = new bullets(x, y, w, h)
				bulletsArr.push(bullet);
				drawBullets();
			}
			document.addEventListener('click', drawBullets);
			function drawBullets(){
				for(let i = 0; i<bulletsArr.length; i++){
					ctx.beginPath();
					let bullet = bulletsArr[i];
					ctx.fillStyle = 'black';
					ctx.rect(bullet.x, bullet.y, bullet.w, bullet.h);
					ctx.fill();
					if(dir == "right"){
						bullet.x+=5;
						if(bullet.x == cnv.width){
						delete bullet[i];
					}
					}

					if(dir == "left"){
						bullet.x-=5;
					}
					if(dir == "up"){
						bullet.y-=5;
					}
					if(dir == "down"){
						bullet.y+=5;
					}
				}
			}
setInterval(drawBullets, 10)
	tank.src = "/home/it2/Документы/Sergej Liava/tank3.png"
	function game(){
		ctx.clearRect(0,0,cnv.width,cnv.height);
		ctx.drawImage(tank,tx, ty,tw,th);
		if(playerLeft){
			tx -= 5;
			dir="left";
		}
		if(playerRight){
			tx += 5;
			dir="right";
		}
		if(playerUp){
			ty -= 5;
			dir="up";
		}
		if(playerDown){
			ty += 5;
			dir="down"
		}
		if(shot){
			createbullets();
		}
	}
	setInterval(game,1)
</script>
</body>
</html>